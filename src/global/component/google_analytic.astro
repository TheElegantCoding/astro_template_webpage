---
import Show from '@global/component/show.astro';
import { siteConfiguration } from '@global/configuration/site_configuration';
---
<Show when={siteConfiguration.googleAnalyticId && import.meta.env.MODE !== 'development'}>
  <script
    type='text/partytown'
    async
    is:inline
    src={`https://www.googletagmanager.com/gtag/js?id=${siteConfiguration.googleAnalyticId}`}
  />
  <script
    type='text/partytown'
    is:inline
    define:vars={{ siteConfiguration }}
  >
    window.dataLayer ||= [];

    const gtag = (...args) =>
    {
      // eslint-disable-next-line no-undef
      dataLayer.push(args);
    };

    gtag('js', new Date());

    gtag('config', siteConfiguration.googleAnalyticId);
  </script>
</Show>